<div class="notes-wrapper">
  <app-page-header
    [title]="title()"
    (activeNotesOutput)="activeNotesOutput.emit()"
    (searchNotesOutput)="searchNotesOutput.emit($event)"
    (settingsOutput)="
      showSettings = true; this.settingsPage = '$$COLOR-THEME'; settingsOutput.emit()
    "
  ></app-page-header>

  <!-- Mobile, tablet -->

  <div class="sidebar-all-notes-content-sidebar-right-menu-wrapper-mobile-tablet">
    @if (sectionToShow === 'SIDEBAR_ALL_NOTES') {
    <app-sidebar-all-notes
      [notes]="notes()"
      [allNotes]="allNotes()"
      [title]="title()"
      [showSearchBar]="showSearchBar"
      (noteOutput)="note = $event; sectionToShow = 'CONTENT'"
    ></app-sidebar-all-notes>
    } @else if (sectionToShow === 'CONTENT') {
    <app-content
      [note]="note"
      (returnSidebarAllNotes)="sectionToShow = 'SIDEBAR_ALL_NOTES'"
      (archiveNote)="archiveNote.emit($event)"
      (restoreNote)="restoreNote.emit($event)"
      (deleteNote)="deleteNote.emit($event)"
    ></app-content>
    } @else if (sectionToShow === 'TAGS') {
    <app-tags
      [notes]="allNotes()"
      (taggedNotesOutput)="taggedNotesOutput.emit($event); sectionToShow = 'SIDEBAR_ALL_NOTES'"
    ></app-tags>
    }
    <app-menu-bar
      (allNotesOutput)="activeNotesOutput.emit(); sectionToShow = 'SIDEBAR_ALL_NOTES'"
      (archivedNotesOutput)="archivedNotesOutput.emit(); sectionToShow = 'SIDEBAR_ALL_NOTES'"
      (tagsOutput)="sectionToShow = 'TAGS'"
      (searchNotesOutput)="sectionToShow = 'SIDEBAR_ALL_NOTES'; showSearchBar = true"
    ></app-menu-bar>
  </div>

  <!-- Desktop -->
  @if (!showSettings) {
  <div class="sidebar-all-notes-content-sidebar-right-menu-wrapper-desktop">
    <app-sidebar-all-notes
      [notes]="notes()"
      (noteOutput)="note = $event"
      [note]="note"
    ></app-sidebar-all-notes>
    <app-content [note]="note" (saveNote)="saveNote.emit($event)"></app-content>
    <app-sidebar-right-menu
      [note]="note"
      (archiveNote)="archiveNote.emit($event)"
      (restoreNote)="restoreNote.emit($event)"
      (deleteNote)="deleteNote.emit($event)"
    ></app-sidebar-right-menu>
  </div>
  } @else {
  <div class="settings-wrapper-desktop">
    <app-settings-menu
      (colorTheme)="settingsPage = '$$COLOR-THEME'"
      (fontTheme)="settingsPage = '$$FONT-THEME'"
      (changePassword)="settingsPage = '$$CHANGE-PASSWORD'"
      [settingsPage]="settingsPage"
    ></app-settings-menu>
    @if (settingsPage === '$$COLOR-THEME') {
    <app-color-theme></app-color-theme>
    } @else if (settingsPage === '$$FONT-THEME') {
    <app-font-theme></app-font-theme>
    } @else if (settingsPage === '$$CHANGE-PASSWORD') {
    <app-change-password></app-change-password>
    }
  </div>
  }
</div>
